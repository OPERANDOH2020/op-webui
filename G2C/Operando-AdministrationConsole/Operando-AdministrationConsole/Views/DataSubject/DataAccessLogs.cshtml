
@{
    ViewBag.MenuSection = "Data Subject";
    ViewBag.Title = "Data Access Logs";

    Layout = "~/Views/Shared/_LayoutOperando.cshtml";
}

<!-- BEGIN PAGE BASE CONTENT -->

<div class="m-heading-1 border-grey-silver m-bordered">
    <p>
        This log shows how your data is being used. Each request, whether accepted and rejected, is shown.
        These results reflect the settings in your privacy preferences, and allow you to see your choices being enforced
    </p>
</div>

<div class="portlet light">
    <div class="portlet-title">
        <div class="caption">
            <span class="caption-subject font-dark bold uppercase">Log</span>
        </div>
    </div>
    <div class="portlet-body">
        <div class="row">
            <div class="form-group col-md-6 col-md-offset-6" style="padding-right: 0;">
                <form class="form-horizontal">
                    <label class="col-md-4 control-label">Filter by Type</label>
                    <div class="col-md-8" style="padding-right: 0;">
                        <select class="form-control bs-select" id="user-log-type-select" multiple>
                            <option value="0" selected>Denied</option>
                            <option value="1" selected>Allowed</option>
                        </select>
                    </div>

                </form>
            </div>
        </div>
        <div class="row">
            <table class="table table-striped table-bordered table-hover order-column" id="data_access_log">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Date</th>
                        <th>Requester</th>
                        <th>Title</th>
                        <th>Message</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @if (String.IsNullOrEmpty(ViewBag.Error))
                    {
                        foreach (var item in Model)
                        {
                            <tr class="@item.logLevel">
                                <td>
                                    @if (item.logLevel == "INFO")
                                    {
                                        <div class="label label-sm label-success">
                                            <i class="fa fa-info-circle"></i>
                                        </div> <span class="hidden">ALLOWED</span>
                                    }
                                    else if (item.logLevel == "WARN")
                                    {
                                        <div class="label label-sm label-danger">
                                            <i class="fa fa-warning"></i>
                                        </div><span class="hidden">DENIED</span>
                                    }
                                </td>
                                <td>@item.logDate</td>
                                <td>@item.requesterType - @item.requesterId</td>
                                <td>@item.title</td>
                                <td>@item.description</td>
                                <td>
                                    <a class="btn btn-circle btn-sm yellow-gold" href="@Url.Action("AccessPreferences", "DataSubject")"> Edit OSP Settings </a>
                                </td>
                            </tr>
                            
                        }
                    }
                    else
                    {
                            <tr>
                                <td colspan="6" class="text-center">@ViewBag.Error</td>
                            </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
<!-- END PAGE BASE CONTENT -->





@section PagePluginStyles {
<link href="~/assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet" type="text/css" />
<link href="~/assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
<link href="~/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />
}

@section PageStyles {

}

@section PagePlugins {
<script src="~/assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js" type="text/javascript"></script>
<script src="~/assets/global/scripts/datatable.js" type="text/javascript"></script>
<script src="~/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="~/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
}

@section PageScripts {
<script src="~/assets/pages/scripts/operando-custom-bootstrap-select.js" type="text/javascript"></script>
<script src="~/assets/pages/scripts/operando-user-table-managed.js" type="text/javascript"></script> 
}
