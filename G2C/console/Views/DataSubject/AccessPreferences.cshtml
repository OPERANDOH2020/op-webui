@functions {
    private dynamic _ospPrivacyPolicies;
}
@{
    ViewBag.MenuSection = "Data Subject";
    ViewBag.Title = "Access Preferences";
    Layout = "~/Views/Shared/_LayoutOperando.cshtml";
}

<!-- BEGIN PAGE BASE CONTENT -->
<div class="portlet-body font-grey-gallery">
	<div class="tabbable-custom-operando col-md-3 col-sm-3 col-xs-3">
		<ul class="nav nav-tabs tabs-left">

			@{
			    _ospPrivacyPolicies = ViewBag.ospppList;
			}
			@for (int i=0; i<_ospPrivacyPolicies.Count; i++)
			{
			    var ospPrivacyPolicy =  _ospPrivacyPolicies[i];
			    <li@(i==0 ? " class=active" : "")>
				    <a href="#tab_@ospPrivacyPolicy.PolicyUrl.GetHashCode()" data-toggle="tab" aria-expanded=@(i==0 ? "true" : "false")> @ospPrivacyPolicy.PolicyUrl </a>
			    </li>
			}
		</ul>
	</div>

	<div class="col-md-9 col-sm-9 col-xs-9 tabs-custom-operando">
		<div class="tab-content">
			@for (int i=0; i<_ospPrivacyPolicies.Count; i++)
			{
				var ospPrivacyPolicy =  _ospPrivacyPolicies[i];
			    <!-- BEGIN TAB @ospPrivacyPolicy.PolicyUrl CONTENT -->
			    <div class="portlet light tab-pane fade @(i==0 ? "active in" : "")" id="tab_@ospPrivacyPolicy.PolicyUrl.GetHashCode()">
				    <div class="portlet-title">
					    <div class="caption">
						    <span class="caption-subject font-dark bold uppercase">Privacy wizard</span>
					    </div>
				    </div>
				    <div class="portlet-body">
					    <div class="col-md-10">
						    <p>You can use our privacy wizard to generate a recommended privacy policy quickly and easily.</p>
					    </div>
					    <div class="col-md-2 text-right">
						    <p>
							    <button type="button" class="btn yellow-gold">Start</button>
						    </p>
					    </div>
				    </div>
				    <div class="portlet-title">
					    <div class="caption">
						    <span class="caption-subject font-dark bold uppercase">@ospPrivacyPolicy.PolicyUrl privacy settings</span>
					    </div>
				    </div>
				    <div class="portlet-body form">
					    <p>Your privacy settings are:</p>
					    <form class="form-horizontal" role="form" method="post" name="@ospPrivacyPolicy.PolicyUrl form">
						    <div class="form-body">

							    @foreach (var policy in ospPrivacyPolicy.Policies)
							    {
							        <div class="form-group">
								        <label class="col-md-6 control-label">@policy.Subject should be able to see my:</label>
								        <div class="col-md-6">
									        <div class="mt-checkbox-list">
										        <label class="mt-checkbox">
											        <input type="checkbox"
											               name="@policy.Subject.GetHashCode() @policy.Resource.GetHashCode()"
											               value="@policy.Permission"
											               @if (policy.Permission == true)
											               {
											                   @: checked="checked"
											               }> @policy.Resource
											        <span></span>
										        </label>
									        </div>
								        </div>
							        </div>
							    }
						    </div>
						    <div class="form-actions right">
							    <button type="submit" class="btn yellow-gold" name="@ospPrivacyPolicy.PolicyUrl">Update User Privacy Policy</button>
						    </div>
					    </form>
				    </div>
			    </div>
			}
		</div>
	</div>

</div>

<!-- END PAGE BASE CONTENT -->


@section PagePluginStyles {
	<link href="~/assets/global/plugins/bootstrap-sweetalert/sweetalert.css" rel="stylesheet" type="text/css"/>
}

@section PageStyles {

}

@section PagePlugins {
	<script src="~/assets/global/plugins/bootstrap-confirmation/bootstrap-confirmation.min.js" type="text/javascript"></script>
	<script src="~/assets/global/plugins/bootstrap-sweetalert/sweetalert.min.js" type="text/javascript"></script>
}

@section PageScripts {
	<script src="~/assets/pages/scripts/ui-confirmations.min.js" type="text/javascript"></script>
	<script src="~/assets/pages/scripts/ui-sweetalert.min.js" type="text/javascript"></script>
}